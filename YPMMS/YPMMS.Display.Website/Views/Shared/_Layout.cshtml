@using YPMMS.Display.Website.Enums
@using YPMMS.Display.Website.Extensions
@using YPMMS.Shared.Core.Enums
@using System.Web.Configuration
@{
    var user = SessionHelper.CurrentUserDetails ?? new YPMMS.Display.Website.Models.Account.CurrentUserDetailsModel() { Name = "Session has timed out", Email = "Please Login again" };
}
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>@ViewBag.Title - SCC</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,300,400,400i,700|Roboto:100,300,400,500,700">
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/ui-lightness/jquery-ui.css">
    <script src="~/Scripts/modernizr-2.8.3.min.js"></script>
    @Styles.Render("~/Content/css/default")
</head>
<body class="nav-background">
    <!--[if lt IE 9]>
        <p class="browserupgrade" style="position:fixed; top:0; z-index:99999; text-align:center; width:100%">You are using an <strong>outdated</strong> browser. Some of the features will not work correctly. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <nav id="sidebar">

        @if ("true" == WebConfigurationManager.AppSettings["IsTebsConnectSystem"])
        {
            <div class="logo-for-desktop">
                <img src="~/Content/img/general/scc-new-logo.png">
             </div>

            if (!string.IsNullOrWhiteSpace(user.Logo))
            {
                <div class="gamestech-logo-side">
                    <img src="@user.Logo" />
                </div>
            }
            <div class="menu">
                <ul>
                    @{
                        var activeSection = SessionHelper.ActiveSection ?? SiteSection.Overview;
                        var overviewClass = (activeSection == SiteSection.Overview) ? "active-page" : string.Empty;
                        var adminClass = (activeSection == SiteSection.Admin) ? "active-page" : string.Empty;
                        var collectionsClass = (activeSection == SiteSection.Collections) ? "active-page" : string.Empty;
                        var managerRefillClass = (activeSection == SiteSection.ManagerRefill) ? "active-page" : string.Empty;
                        var reportsClass = (activeSection == SiteSection.Reports) ? "active-page" : string.Empty;
                    }
                    @switch (User.GetRole())
                    {
                        case Role.Admin:
                            @* Added back the Machine Management facility *@
                            <li class="dropdown">
                                <a class="myaccount @adminClass">Admin<span></span></a>
                                <ul class="child-items">
                                    <li>@Html.ActionLink("Merchant Management", "MerchantManagement", "Admin")</li>
                                    <li>@Html.ActionLink("Collectors", "Collector", "Admin")</li>
                                    <li>@Html.ActionLink("User Register", "Register", "Account")</li>
                                </ul>
                            </li>
                            <li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>
                            @*<li>@Html.ActionLink("Reports", "Index", "Report", null, new { @class = $"reports {reportsClass}" })</li>*@
                            @*<li>@Html.ActionLink("Collections", "Index", "Collectors", null, new { @class = $"collections {collectionsClass}" })</li>*@
                            @*<li>@Html.ActionLink("Manager Refill", "Index", "Manager", null, new { @class = $"refill {managerRefillClass}" })</li>*@
                        break;

                    case Role.Collector:
                        @*<li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>*@
                            <li>@Html.ActionLink("Collections", "Index", "Collector", null, new { @class = $"collections {collectionsClass}" })</li>
                            break;

                        case Role.Manager:
                            <li class="dropdown">
                                <a class="myaccount @adminClass">Admin<span></span></a>
                                <ul class="child-items">
                                    <li>@Html.ActionLink("Machine Management", "SystemManagement", "Admin")</li>
                                </ul>
                            </li>
                            <li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>
                            @*<li>@Html.ActionLink("Manager Refill", "Index", "Manager", null, new { @class = $"refill {managerRefillClass}" })</li>*@
                        break;
                    }
                </ul>
            </div><!--end of menu-->
                        }

        @if ("false" == WebConfigurationManager.AppSettings["IsTebsConnectSystem"])
        {
            <div class="logo-for-desktop">
                <img src="~/Content/img/svg/livecollect-logo-inverted-red.svg">
            </div>
            <div class="gamestech-logo-side"><img src="~/Content/img/general/gamestech.png" width="190"></div>

            <div class="menu">
                <ul>
                    @{
                        var activeSection = SessionHelper.ActiveSection ?? SiteSection.Overview;
                        var overviewClass = (activeSection == SiteSection.Overview) ? "active-page" : string.Empty;
                        var adminClass = (activeSection == SiteSection.Admin) ? "active-page" : string.Empty;
                        var collectionsClass = (activeSection == SiteSection.Collections) ? "active-page" : string.Empty;
                        var managerRefillClass = (activeSection == SiteSection.ManagerRefill) ? "active-page" : string.Empty;
                        var reportsClass = (activeSection == SiteSection.Reports) ? "active-page" : string.Empty;
                    }
                    @switch (User.GetRole())
                {
                    case Role.Admin:
                            <li class="dropdown">
                                <a class="myaccount @adminClass">Admin<span></span></a>
                                <ul class="child-items">
                                    <li>@Html.ActionLink("Dashboard", "Index", "Admin")</li>
                                    @*<li>@Html.ActionLink("Users", "Collector", "Admin")</li>*@
                                    @*
                                        <li><a>Profile</a></li>

                                    *@
                                    <li>@Html.ActionLink("System Management", "SystemManagement", "Admin")</li>
                                </ul>
                            </li>
                            <li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>
                            <li>@Html.ActionLink("Reports", "Index", "Report", null, new { @class = $"reports {reportsClass}" })</li>
                            <li>@Html.ActionLink("Collections", "Index", "Collectors", null, new { @class = $"collections {collectionsClass}" })</li>
                            <li>@Html.ActionLink("Manager Refill", "Index", "Manager", null, new { @class = $"refill {managerRefillClass}" })</li>
                            break;

                        case Role.Collector:
                            @*<li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>*@
                            <li>@Html.ActionLink("Collections", "Index", "Collector", null, new { @class = $"collections {collectionsClass}" })</li>
                            break;

                        case Role.Manager:
                            @*<li>@Html.ActionLink("Overview", "Index", "Overview", null, new { @class = $"home {overviewClass}" })</li>*@
                            <li>@Html.ActionLink("Manager Refill", "Index", "Manager", null, new { @class = $"refill {managerRefillClass}" })</li>
                            break;
                    }
                </ul>
            </div><!--end of menu-->
                        }
    </nav>

    <div id="overall-wrapper">
        <section class="wrapper">
            @Html.Partial("Header")
            @RenderBody()
            @*<footer id="sticky-footer">
                    <img src="~/Content/img/svg/itl-logo.svg" alt="" />
                </footer>*@
            <div class="loading-message-corner">
                <div class="loader-container"><div class="loader2"></div></div>
                <p class="info">Loading new date(s)</p>
                <p class="secondary-info">This may take a moment</p>
                <p class="failed-to-load">Failed to Load</p>
            </div>
        </section>
    </div><!--end overall-wrapper-->

    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    @Scripts.Render("~/bundles/js/default")
    <script src="~/signalr/hubs"></script>

    @RenderSection("scripts", required: false)

    <script>
        $(document).ready(function () {
            Header.initialise();
        })
    </script>

</body>
</html>
