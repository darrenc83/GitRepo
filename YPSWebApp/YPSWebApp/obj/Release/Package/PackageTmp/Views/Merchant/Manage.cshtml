@model IEnumerable<Shared.Core.Models.MerchantModel>

@{
    ViewBag.Title = "Manage";
}

<h2>Manage</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table" id="MerchantManagementTable">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.MerchantId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MerchantName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedBy)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LastUpdatedDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LastUpdatedBy)
            </th>
            <th>
                Actions
            </th>

        </tr>
    </thead>

@foreach (var item in Model)
{
    <tbody>
        <tr>
            <td>
                
                @Html.DisplayFor(modelItem => item.MerchantId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MerchantName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedBy)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastUpdatedDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastUpdatedBy)
            </td>
            <td>

                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    </tbody>
}
</table>


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" />
<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>

<script type="text/javascript">
    //$(document)
    //       .ready(function () {

             
    //           $('#MerchantManagementTable').DataTable({
    //               "processing": true,
    //               "serverSide": true,
    //               "info": true,
    //               "stateSave": true,
    //               "order": [[0, "asc"]]
                   
    //           });




               $(document).ready(function () {
                   $('#MerchantManagementTable').dataTable({                    
                       serverSide: true,
                       ajax: {
                           url: '/Merchant/Manage',
                           dataFilter: function (data) {
                               var json = jQuery.parseJSON(data);
                               json.recordsTotal = json.total;
                               json.recordsFiltered = json.total;
                               json.data = json.list;
                               alert(JSON.stringify(json))
                               return JSON.stringify(json); // return JSON string
                           }
                       }

                     })
               });





           //});
</script>
